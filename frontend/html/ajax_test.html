<!DOCTYPE html>

<html>
  <head>
    <base href="/">

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-cache">
    <meta meta-equiv="Expires" content="0">
    <meta http-equiv="Pragma" CONTENT="no-cache">

    <link rel="shortcut icon" href="logo.jpg">

    <title></title>
  </head>

  <body>
    <!-- load my fp library -->
    <script src="common.js"></script>

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="styles.css">

    <script src="node_modules/jquery/dist/jquery.js"></script>

    <div style="width: 100%">
      <div style="width: 5%; float: left">
        TYPE:
      </div>
      <div style="float: left">
        <select id="type">
          <option value="GET">GET</option>
          <option value="POST">POST</option>
          <option value="PUT">PUT</option>
          <option value="DELETE">DELETE</option>
        </select>
      </div>
    </div>
    <div style="clear: both"></div>
    <br />
    <div style="width: 100%">
      <div style="width: 5%; float: left">
        URL:
      </div>
      <div style="float: left">
         <input type="text" id="url" />
      </div>
    </div>
    <div style="clear: both"></div>
    <br />
    <div style="width: 100%">
      <div style="width: 5%; float: left">
        BODY:
      </div>
      <div style="float: left">
        <textarea cols="70" rows="7" id="body"></textarea>
      </div>
    </div>
    <div style="clear: both"></div>
    <br />
    <input type="button" id="send" value="Send"/>
    <br />
    <div id="run">0</div>
    <div id="output"></div>

    <script type="text/javascript">
      $ ('#send').click (() => {
        var body = JSON.stringify (eval ('(' + $ ('#body').val () + ')'))
        $.ajax ({
          contentType: 'application/json',
          data: body,
          url: '/' + $ ('#url').val (),
          type: $ ('#type').val (),
          success: (data) => {
            $ ('#output').text (data)
            $ ('#run').text (1 + ~~ $ ('#run').text ())
          },
          error: () => {
            $ ('#output').text ('error')
            $ ('#run').text (1 + ~~ $ ('#run').text ())
          }
        })
      })
    </script>
  </body>
</html>
